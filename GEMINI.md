# Project: first

## Project Overview

`first` is a command-line tool designed to streamline developer workflows by enabling "full context swapping" for different development environments and tools, particularly AI coding assistants. The project's core philosophy is to keep the main project repository clean and free from tool-specific configuration files.

The tool aims to provide a simple command, like `first load <context>`, to switch between different "cognition simulations" (cogsims). A cogsim represents a complete development context, including configurations for AI assistants (like Gemini or Claude), linters, and other tools. This approach allows for a clean separation between the project's source code and the developer's choice of tools, making the development environment more modular and less intrusive.

The project is in its conceptual phase, with the foundational ideas and philosophy documented in the `first.md` file.

## Building and Running
 
### Local Development
 
To build the native binary locally:

```bash
scala-cli package . --native -o tmp/first -f
```
 
### Cross-Compilation & Releases
 
Cross-compiling Scala Native, for instance, from Intel Mac to Apple Silicon (`arm64`) is complex due to missing native libraries (`libidn2`, `openssl`).

For quick local development checks, you can use the `tmp/first` binary that is generated by the `scala-cli package` command.
 
**Preferred Release Strategy:**
Use the GitHub Actions workflow (`.github/workflows/release.yml`) which builds natively on:
- Linux (`ubuntu-latest`)
- macOS Intel (`macos-13`)
- macOS Apple Silicon (`macos-14`)
- Windows (`windows-latest`)
 
Trigger a release by pushing a tag:
```bash
git tag v0.1.1
git push origin v0.1.1
```

## Development Conventions

*   **Separation of Concerns:** The project's primary convention is to maintain a strict separation between the core project code and the configuration of development tools.
*   **Philosophical Documentation:** The project was initiated with a detailed philosophical document (`first.md`) that outlines the vision and goals. This suggests a preference for clear, high-level documentation to guide development.
*   **Non-Intrusive Tooling:** Any tools or configurations added to the project should be non-intrusive and easily swappable.

## External Contexts

### GitHub Spec Kit

This project utilizes the "GitHub Spec Kit," located in the `.specify/` directory. This kit provides a structured framework for development, including its own set of memories and conventions.

*   **Memories:** The core memories and constitution for the spec kit are located in `.specify/memory/`. These files contain the guiding principles and rules for development within this framework.
*   **Scripts:** The `.specify/scripts/` directory contains shell scripts for automating various development tasks.
*   **Templates:** The `.specify/templates/` directory holds templates for common files like plans, specifications, and checklists.

When working on this project, please be aware of the context provided by the GitHub Spec Kit and adhere to its conventions.

This memories should be immediatelly available to Gemini:

@.specify/memory/constitution.md
@.specify/memory/constitution_update_checklist.md

## Key Files

*   `first.md`: The foundational document of the project. It contains the project's philosophy, goals, and the overall vision. It's a "sincere open letter" to future developers and AI assistants who will work on this project.
*   `README.md`: The main entry point for the project.
*   `LICENSE`: The project's license file.

## Active Technologies
- Scala 3.3.4 + decline, sconfig, munit, scribe (001-fctx-management-actions)
- Scala 3.3.4 + `com.softwaremill.sttp.client4::core` (HTTP), `com.monovore::decline` (CLI), `com.lihaoyi::upickle` (Config), `com.lihaoyi::os-lib` (Filesystem), `org.ekrich::sconfig` (Config), `com.outr::scribe` (Logging), `org.scalameta::munit` (Testing) (004-remote-fctx-artifacts)
- Local filesystem at `~/.first/cache/` for content-addressable caching. (004-remote-fctx-artifacts)
- Scala 3.3.4 (Scala Native 0.5.9) + decline (CLI), os-lib (FS), upickle (JSON), sttp (HTTP) (005-coursier-install)
- Scala 3.3.4 + `com.monovore::decline` (CLI), `com.lihaoyi::os-lib` (File Ops), `org.ekrich::sconfig` (HOCON) (008-update-fctx)
- Filesystem (HOCON config files) (008-update-fctx)

## Recent Changes
- 001-fctx-management-actions: Added Scala 3.3.4 + decline, sconfig, munit, scribe

## Critical Rules
- **Linting Order**: Always execute linting steps exactly as defined in `.specify/scripts/bash/lint.sh`.
- **Diff Review**: If a diff shows too many format differences after linting, check with the user before proceeding.
- **Safe and Expressive Coding**:
    - **No Nulls**: Explicit use of `null` is forbidden. Use `Option`.
    - **No Exceptions**: Avoid throwing exceptions for flow control. Use `Either`, `Try`, or other functional error handling.
    - **Expressive Logic**: Prefer `match`, `map`, `flatMap` over excessive `if/else` nesting.
    - **No Var**: Do not use `var`. Design algorithms so intermediate invalid or inconsistent values are not possible. Avoid `java.util.concurrent.atomic` unless absolutely necessary.
- **Type Safety**: Use specific types (e.g., `java.time` instead of `Long` for time) to enhance safety and clarity.
- **Development Workflow**:
    - **Atomic Features**: One feature per branch, resulting in a single comprehensive commit.
    - **Linear History**: Feature branches **MUST** be rebased onto main. **No merge commits** (fast-forward only).
    - **Roadmap Tracking**: Update `SPEC-ROADMAP.md` after merging.
    - **Specification Gating**: `requirements.md` checklist must be reviewed before implementation.
- **Governance**: The `.specify/memory/constitution.md` is the supreme governing document.
