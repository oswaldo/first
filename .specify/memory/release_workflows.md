# Release & CI/CD Workflows

This project employs a robust, automated release workflow designed to ensure `main` branch stability while providing immediate access to the latest changes via nightly snapshots.

## Core Philosophy

1.  **Protected Main**: The `main` branch is always stable and deployable.
2.  **Continuous delivery**: Every merge to `main` produces a usable snapshot.
3.  **Semantic Versioning**: Official releases follow SemVer, while snapshots use a rolling `nightly` tag.

## Workflow Components

### 1. Continuous Integration (CI)

- **File**: `.github/workflows/ci.yml`
- **Trigger**: Pull Requests targeting `main`.
- **Checks**: Compiles code, runs tests, and executes the linter (`lint.sh`).
- **Rule**: This workflow must pass before merging. GitHub Branch Protection should be enabled for `main` requiring the `Quality Check` status.

### 2. Snapshot (Nightly) Releases

- **File**: `.github/workflows/snapshot.yml`
- **Trigger**: Push to `main` (typically after a PR merge).
- **Behavior**:
  - Force-updates the `nightly` git tag to the HEAD of `main`.
  - Builds native binaries for all supported platforms.
  - Updates the "Nightly Build" release on GitHub (overwriting assets).
- **Optimizations**:
  - **File Skipping**: Automatically skips builds if the commit _only_ modifies documentation (`**.md`), `LICENSE`, `TRADEMARK`, or `.gitignore`.
  - **Message Skipping**: Skips the build job if the commit message starts with `project:` or `docs:`.

### 3. Official Releases

- **File**: `.github/workflows/release.yml`
- **Trigger**: Manual (`workflow_dispatch` in GitHub Actions UI).
- **Inputs**:
  - `version` (Optional): The version tag (e.g., `v1.2.0`).
- **Auto-Increment Logic**:
  - If `version` is left empty, the system finds the last official `v*` tag.
  - It increments the **minor** version (e.g., `v0.1.0` -> `v0.2.0`) and resets the patch version.
- **Release Notes**: Automatically generated by diffing against the previous _official_ tag, correctly ignoring the intermediate `nightly` tag.

## Usage Guide

- **For Devs**: Open PRs to `main`. Ensure CI passes.
- **For Users**: Use `nightly` for bleeding edge, or specific versions for stability.
- **For Admins**: trigger the "Release" workflow manually when a milestone is reached. Leave version blank for auto-increment.
